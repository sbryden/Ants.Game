import{P as h}from"./phaser-0RJB29YE.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();var c=(e=>(e.IDLE="IDLE",e.MOVING="MOVING",e))(c||{});class d{constructor(t,i,n,s){this.id=t,this.x=i,this.y=n,this.vx=0,this.vy=0,this.state=c.IDLE,this.colonyId=s,this.timeSinceDirectionChange=0}}class l{constructor(t,i,n){this.id=t,this.x=i,this.y=n,this.ants=[]}spawnAnt(t){const i=new d(t,this.x,this.y,this.id);return this.ants.push(i),i}getAnts(){return[...this.ants]}}class u{constructor(t,i){this.width=t,this.height=i,this.colonies=[],this.nextAntId=0,this.cachedAnts=[],this.antsCacheDirty=!0}createColony(t,i){const n=this.colonies.length,s=new l(n,t,i);return this.colonies.push(s),s}spawnAnt(t){const i=t.spawnAnt(this.nextAntId++);return this.antsCacheDirty=!0,i}getAllAnts(){if(this.antsCacheDirty){this.cachedAnts=[];for(const t of this.colonies)this.cachedAnts.push(...t.getAnts());this.antsCacheDirty=!1}return this.cachedAnts}}function a(e,t){const i=Math.random()*Math.PI*2;e.vx=Math.cos(i)*t.speed,e.vy=Math.sin(i)*t.speed,e.state=c.MOVING}function f(e,t){e.x+=e.vx*t,e.y+=e.vy*t}function y(e,t){(e.x<0||e.x>t.width)&&(e.vx*=-1,e.x=Math.max(0,Math.min(t.width,e.x))),(e.y<0||e.y>t.height)&&(e.vy*=-1,e.y=Math.max(0,Math.min(t.height,e.y)))}function m(e,t){return e>=t.changeDirectionInterval}function p(e,t){e.state===c.IDLE&&a(e,t)}class g{constructor(t){this.world=t,this.movementConfig={speed:50,changeDirectionInterval:2}}tick(t){const i=this.world.getAllAnts();for(const n of i)this.updateAntBehavior(n,t)}updateAntBehavior(t,i){t.timeSinceDirectionChange+=i,m(t.timeSinceDirectionChange,this.movementConfig)?(a(t,this.movementConfig),t.timeSinceDirectionChange=0):p(t,this.movementConfig),f(t,i),y(t,this.world)}update(t){this.tick(t)}initializeWorld(){const t=this.world.createColony(this.world.width/2,this.world.height/2),i=20;for(let n=0;n<i;n++){const s=this.world.spawnAnt(t);a(s,this.movementConfig)}}}class w{constructor(t){this.antBodyRadius=3,this.antBodyColor=9127187,this.antHeadRadius=2,this.antHeadColor=6636321,this.graphics=t.add.graphics()}render(t){this.graphics.clear();for(const i of t)this.drawAnt(i)}drawAnt(t){const i=Math.sqrt(t.vx*t.vx+t.vy*t.vy);let n=0,s=0;if(i>0){const o=t.vx/i,r=t.vy/i;n=o*(this.antBodyRadius+this.antHeadRadius),s=r*(this.antBodyRadius+this.antHeadRadius)}this.graphics.fillStyle(this.antBodyColor,1),this.graphics.fillCircle(t.x,t.y,this.antBodyRadius),this.graphics.fillStyle(this.antHeadColor,1),this.graphics.fillCircle(t.x+n,t.y+s,this.antHeadRadius)}destroy(){this.graphics.destroy()}}class C extends h.Scene{constructor(){super({key:"MainScene"})}create(){this.cameras.main.setBackgroundColor("#2d4a2e");const t=this.scale.width,i=this.scale.height;this.world=new u(t,i),this.simulationSystem=new g(this.world),this.simulationSystem.initializeWorld(),this.antRenderer=new w(this),this.add.text(16,16,"Ants!",{fontSize:"32px",color:"#ffffff",fontStyle:"bold"}).setDepth(100),this.add.text(16,56,"Watch the ants wander...",{fontSize:"16px",color:"#cccccc"}).setDepth(100)}update(t,i){const n=i/1e3;this.simulationSystem.update(n),this.antRenderer.render(this.world.getAllAnts())}shutdown(){this.antRenderer.destroy()}}const v={type:h.AUTO,width:1024,height:768,parent:"game-container",backgroundColor:"#2d4a2e",scene:[C],scale:{mode:h.Scale.FIT,autoCenter:h.Scale.CENTER_BOTH}};new h.Game(v);
